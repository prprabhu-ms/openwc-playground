<!doctype html>
<html lang="en-GB">

<head>
  <meta charset="utf-8">
  <style>
    body {
      background: #fafafa;
    }
  </style>
</head>

<body>
  <div style="height: 30rem; width: 40rem">
    <div id="call-composite" style="height: 100%; width: 100%"></div>
  </div>
  <div id="demo"></div>

  <template id="demo-template">
    <acs-real-call-provider>
      <acs-microphone-button></acs-microphone-button>
    </acs-real-call-provider>
  </template>

  <script fetchpriority="high"
    src="https://github.com/Azure/communication-ui-library/releases/latest/download/callComposite.js"></script>
  <script type="module">


    // Import all web component defs.
    import '../dist/esbuild/index.js';

    const USER_ID = '8:acs:dd9753c0-6e62-4f74-ab0f-c94f9723b4eb_00000010-e1fe-c491-eef0-8b3a0d005b7b';
    const TOKEN = 'eyJhbGciOiJSUzI1NiIsImtpZCI6IjEwNCIsIng1dCI6IlJDM0NPdTV6UENIWlVKaVBlclM0SUl4Szh3ZyIsInR5cCI6IkpXVCJ9.eyJza3lwZWlkIjoiYWNzOmRkOTc1M2MwLTZlNjItNGY3NC1hYjBmLWM5NGY5NzIzYjRlYl8wMDAwMDAxMC1lMWZlLWM0OTEtZWVmMC04YjNhMGQwMDViN2IiLCJzY3AiOjE3OTIsImNzaSI6IjE2NTAzNzY2NDYiLCJleHAiOjE2NTA0NjMwNDYsImFjc1Njb3BlIjoidm9pcCIsInJlc291cmNlSWQiOiJkZDk3NTNjMC02ZTYyLTRmNzQtYWIwZi1jOTRmOTcyM2I0ZWIiLCJpYXQiOjE2NTAzNzY2NDZ9.CWFUskhlQ-nzGjvb2IanAOgirP6yBe1ji4zQ-_UnMloTzX1BMM4kXeeB0n4CGa7Yy0UgPi49QKqCbdym6AruK4debCeLAN_HyNl7G7QWfsEq5SgR8oDUF0LO_p_Qqq98Ev4gN5sti-yK0AIoSh_byEO89MDBKpQEKp3alBJTgUyk4dDdph_kE6RyKwitG_ct7bdv4ht2J9YPTBEWv8csFeuiWx4ZUqMXMtkmS_PcsgPxHlX4icAiYPxTz3NlzdZqDKscK0i1rNcj0jzjvjzrnQ56wTf3vE2ZsEcwX2ryklDP4AwMTlWsH_aBMF5TrtyTduJm72qQNVLuR5RFV6GWbA';

    // `callComposite` is defined by the cjs module from communication-ui-library.
    // eslint-disable-next-line no-undef
    const callAdapter = await callComposite.loadCallComposite(
      {
        groupId: '85057ec2-b9db-4099-8c2f-e9fddbf4593f',
        displayName: 'ThereAreSoManyMe',
        userId: { communicationUserId: USER_ID },
        token: TOKEN,
      },
      document.querySelector('#call-composite')
    );

    const clone = document.querySelector('#demo-template').content.cloneNode(true);
    document.querySelector('#demo').appendChild(clone);

    // Can only find the tag after it's been added to the main DOM.
    const provider = document.querySelector('acs-real-call-provider');
    provider.adapter = callAdapter;
  </script>
</body>

</html>